From: Marvin Scholz <epirat07@gmail.com>
Date: Sun, 24 Jul 2022 12:11:49 +0200
Subject: configure: properly require libx264 if enabled

When libx264 can not be found even though it is enabled, it should error
out properly instead of silently disabling it.

(cherry picked from commit 564d7946de56155d1c42165a8b561fcf5028cbbc)
---
 configure | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/configure b/configure
index 9d6457d..6e012e4 100755
--- a/configure
+++ b/configure
@@ -6666,7 +6666,7 @@ enabled libvpx            && {
 enabled libwebp           && {
     enabled libwebp_encoder      && require_pkg_config libwebp "libwebp >= 0.2.0" webp/encode.h WebPGetEncoderVersion
     enabled libwebp_anim_encoder && check_pkg_config libwebp_anim_encoder "libwebpmux >= 0.4.0" webp/mux.h WebPAnimEncoderOptionsInit; }
-enabled libx264           && check_pkg_config libx264 x264 "stdint.h x264.h" x264_encoder_encode &&
+enabled libx264           && require_pkg_config libx264 x264 "stdint.h x264.h" x264_encoder_encode &&
                              require_cpp_condition libx264 x264.h "X264_BUILD >= 118" && {
                              [ "$toolchain" != "msvc" ] ||
                              require_cpp_condition libx264 x264.h "X264_BUILD >= 158"; } &&
